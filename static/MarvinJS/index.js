var marvinSketcherInstance;


// 初始化 marvinjs
function marvinInitial() {
    var p = MarvinJSUtil.getEditor("#sketch")
    p.then(function (sketcherInstance) {
        marvinSketcherInstance = sketcherInstance
    }, function (error) {
        alert("Cannot retrieve sketcher instance from iframe:" + error)
    })
}

// 导出数据
function exportMarvinData() {
    marvinSketcherInstance.exportStructure("mol").then(function (source) {
        // marvinMol(source)
        console.log(source)
    }, function (error) {
        alert("Molecule export failed:" + error)
    })

}

// 导入示例数据
function importMarvinData(data) {
    var p = MarvinJSUtil.getEditor("#sketch")
    p.then(function (sketcherInstance) {
        sketcherInstance.importStructure("mol", data).catch(function (error) {
            alert(error)
        });
    }, function (error) {
        alert("Cannot retrieve sketcher instance from iframe:" + error)
    })
}


var exampleData1 = "\n\n\n" +
    " 28 30  0  0  0  0            999 V2000\n" +
    "    4.5080   -1.2375    0.0000 O   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791   -2.8876    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080    2.0625    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935    2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080    1.2375    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935    3.3001    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791    2.0625    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    0.8250    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935    0.8250    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791    3.7126    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080   -0.4125    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    0.0000    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935    0.0000    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    3.3001    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.9370    2.0625    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791    1.2375    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.3645    2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935   -2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935   -1.6500    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.9370    3.7126    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.6515    2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.3645    0.8250    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    1.6500    2.0625    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.6515    3.3001    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    1.6500    1.2375    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791   -3.7126    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.3645   -2.4751    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "  1 12  1  0  0  0  0\n" +
    "  1 20  1  0  0  0  0\n" +
    "  2 19  1  0  0  0  0\n" +
    "  2 27  1  0  0  0  0\n" +
    "  2 28  1  0  0  0  0\n" +
    "  3  4  2  0  0  0  0\n" +
    "  3  5  1  0  0  0  0\n" +
    "  3  7  1  0  0  0  0\n" +
    "  4  6  1  0  0  0  0\n" +
    "  4  8  1  0  0  0  0\n" +
    "  5  9  2  0  0  0  0\n" +
    "  5 10  1  0  0  0  0\n" +
    "  6 11  1  0  0  0  0\n" +
    "  7 15  2  0  0  0  0\n" +
    "  7 16  1  0  0  0  0\n" +
    "  8 17  2  0  0  0  0\n" +
    "  8 18  1  0  0  0  0\n" +
    "  9 13  1  0  0  0  0\n" +
    " 10 14  2  0  0  0  0\n" +
    " 12 13  2  0  0  0  0\n" +
    " 12 14  1  0  0  0  0\n" +
    " 15 21  1  0  0  0  0\n" +
    " 16 22  2  0  0  0  0\n" +
    " 17 23  1  0  0  0  0\n" +
    " 18 24  2  0  0  0  0\n" +
    " 19 20  1  0  0  0  0\n" +
    " 21 25  2  0  0  0  0\n" +
    " 22 25  1  0  0  0  0\n" +
    " 23 26  2  0  0  0  0\n" +
    " 24 26  1  0  0  0  0\n" +
    "M  END\n";


var exampleData2 = "fluoxetine\n" +
    "  Mrv0541 02231214422D\n" +
    "\n" +
    " 22 23  0  0  1  0            999 V2000\n" +
    "    4.3974    2.6813    0.0000 F   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.0475    2.6813    0.0000 F   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    3.5063    0.0000 F   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224   -0.6188    0.0000 O   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.3645   -0.6188    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080   -1.0313    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935   -0.6188    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080   -1.8563    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.0791   -1.0313    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224   -2.2688    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935   -2.2688    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    0.2063    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224   -3.0938    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.7935   -3.0938    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.9370    0.6188    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080    0.6188    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    1.8563    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080   -3.5063    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    1.6500   -1.0313    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.9370    1.4438    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.5080    1.4438    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.2224    2.6813    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "  1 22  1  0  0  0  0\n" +
    "  2 22  1  0  0  0  0\n" +
    "  3 22  1  0  0  0  0\n" +
    "  4  6  1  0  0  0  0\n" +
    "  4 12  1  0  0  0  0\n" +
    "  5  9  1  0  0  0  0\n" +
    "  5 19  1  0  0  0  0\n" +
    "  6  7  1  0  0  0  0\n" +
    "  6  8  1  0  0  0  0\n" +
    "  7  9  1  0  0  0  0\n" +
    "  8 10  2  0  0  0  0\n" +
    "  8 11  1  0  0  0  0\n" +
    " 10 13  1  0  0  0  0\n" +
    " 11 14  2  0  0  0  0\n" +
    " 12 15  2  0  0  0  0\n" +
    " 12 16  1  0  0  0  0\n" +
    " 13 18  2  0  0  0  0\n" +
    " 14 18  1  0  0  0  0\n" +
    " 15 20  1  0  0  0  0\n" +
    " 16 21  2  0  0  0  0\n" +
    " 17 20  2  0  0  0  0\n" +
    " 17 21  1  0  0  0  0\n" +
    " 17 22  1  0  0  0  0\n" +
    "M  END\n";


var exampleData3 = "667467\n" +
    " OpenBabel07281620472D\n" +
    "\n" +
    " 21 23  0  0  0  0  0  0  0  0999 V2000\n" +
    "    8.1962   -0.9585    0.0000 Cl  0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.6660   -2.9827    0.0000 S   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.3981    2.0173    0.0000 N   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.6660   -0.9827    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.5321    0.5173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.5321   -1.4827    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.8000   -1.4827    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    4.6660    0.0173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.5321    1.5173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    5.5321   -2.4827    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    3.8000   -2.4827    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.4260   -0.9480    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.9061   -0.9480    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.4260   -3.0173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.9061   -3.0173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    7.3321   -1.4619    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.0000   -1.4619    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    6.3981    3.0173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    7.2641    1.5173    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    7.3321   -2.5035    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "    2.0000   -2.5035    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n" +
    "  1 16  1  0  0  0  0\n" +
    "  2 10  1  0  0  0  0\n" +
    "  2 11  1  0  0  0  0\n" +
    "  3  9  1  0  0  0  0\n" +
    "  3 18  1  0  0  0  0\n" +
    "  3 19  1  0  0  0  0\n" +
    "  4  6  1  0  0  0  0\n" +
    "  4  7  1  0  0  0  0\n" +
    "  4  8  2  0  0  0  0\n" +
    "  5  8  1  0  0  0  0\n" +
    "  5  9  1  0  0  0  0\n" +
    "  6 10  2  0  0  0  0\n" +
    "  6 12  1  0  0  0  0\n" +
    "  7 11  1  0  0  0  0\n" +
    "  7 13  2  0  0  0  0\n" +
    " 10 14  1  0  0  0  0\n" +
    " 11 15  2  0  0  0  0\n" +
    " 12 16  2  0  0  0  0\n" +
    " 13 17  1  0  0  0  0\n" +
    " 14 20  2  0  0  0  0\n" +
    " 15 21  1  0  0  0  0\n" +
    " 16 20  1  0  0  0  0\n" +
    " 17 21  2  0  0  0  0\n" +
    "M  END\n";